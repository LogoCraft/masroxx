<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harika Kronometre</title> <!-- Başlık güncellendi -->
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Nunito -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;900&display=swap" rel="stylesheet">
    <!-- Font Awesome (Tur simgesi için) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Ana font ailesini belirleme */
        body {
            font-family: 'Nunito', sans-serif;
            /* Ana arka plan rengi: pale sand */
            background-color: #F7E7D1;
        }
        
        /* Sayaç için özel renkler */
        .text-vintage-rouge {
            color: #C04D5D;
        }
        .bg-vintage-rouge {
            background-color: #C04D5D;
        }
        .text-pale-sand {
            color: #F7E7D1;
        }
        .ring-vintage-rouge:focus {
            --tw-ring-color: #C04D5D;
        }
        .border-vintage-rouge {
            border-color: #C04D5D;
        }
        .bg-vintage-rouge-light {
            background-color: #d6707e; /* vintage rouge'un biraz açığı */
        }
        .text-vintage-rouge-dark {
            color: #a03a49; /* vintage rouge'un biraz koyusu */
        }
        
        /* Zaman göstergesi için monospace font */
        .font-mono-spaced {
            font-family: 'Roboto Mono', 'Courier New', monospace;
            /* Rakamların kaymasını engellemek için */
            font-feature-settings: "tnum"; 
        }

        /* Tur listesi için kaydırma çubuğu */
        #laps-list::-webkit-scrollbar {
            width: 6px;
        }
        #laps-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        #laps-list::-webkit-scrollbar-thumb {
            background: #C04D5D;
            border-radius: 10px;
        }
        #laps-list::-webkit-scrollbar-thumb:hover {
            background: #a03a49;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Ana Kronometre Kartı -->
    <div class="bg-white p-6 md:p-10 rounded-2xl shadow-xl max-w-md w-full">
        
        <!-- Başlık -->
        <h1 class="text-3xl font-bold text-center text-vintage-rouge mb-6">
            Harika Kronometre
        </h1>

        <!-- Zaman Ekranı -->
        <div 
            id="time-display" 
            class="text-5xl md:text-6xl font-black text-center text-vintage-rouge my-8 font-mono-spaced"
        >
            00:00:00<span class="text-3xl md:text-4xl text-vintage-rouge-dark">.00</span>
        </div>

        <!-- Kontrol Butonları -->
        <div class="grid grid-cols-2 gap-4 mb-4">
            <!-- Sol Buton (Sıfırla / Tur) -->
            <button 
                id="secondary-btn" 
                class="w-full py-3 px-5 rounded-lg text-lg font-semibold bg-gray-100 text-vintage-rouge transition-all duration-200 hover:bg-gray-200 shadow-sm active:scale-95 disabled:opacity-50"
            >
                Sıfırla
            </button>
            <!-- Sağ Buton (Başlat / Durdur / Devam Et) -->
            <button 
                id="main-btn" 
                class="w-full py-3 px-5 rounded-lg text-lg font-semibold bg-vintage-rouge text-pale-sand transition-all duration-200 transform hover:scale-105 shadow-md active:scale-95"
            >
                Başlat
            </button>
        </div>

        <!-- Tur Listesi Bölümü -->
        <div class="mt-8 pt-6 border-t border-gray-200">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 flex justify-between items-center">
                <span>Turlar</span>
                <button id="clear-laps" class="text-sm text-vintage-rouge hover:underline disabled:text-gray-400 disabled:no-underline" disabled>
                    Temizle
                </button>
            </h2>
            <div id="laps-list" class="h-40 overflow-y-auto pr-2">
                <!-- Turlar buraya eklenecek -->
                <p id="laps-placeholder" class="text-center text-gray-400 italic mt-4">Henüz tur kaydedilmedi.</p>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Gerekli HTML elementlerini seçme
            const timeDisplay = document.getElementById('time-display');
            const mainBtn = document.getElementById('main-btn');
            const secondaryBtn = document.getElementById('secondary-btn');
            const lapsList = document.getElementById('laps-list');
            const lapsPlaceholder = document.getElementById('laps-placeholder');
            const clearLapsBtn = document.getElementById('clear-laps');

            let startTime = 0;
            let elapsedTime = 0;
            let timerInterval;
            let running = false;
            let lapCount = 1;

            // Zamanı formatlayan fonksiyon (HH:MM:SS.ms)
            function formatTime(time) {
                const milliseconds = Math.floor((time % 1000) / 10);
                const seconds = Math.floor((time / 1000) % 60);
                const minutes = Math.floor((time / (1000 * 60)) % 60);
                const hours = Math.floor(time / (1000 * 60 * 60));

                const pad = (num) => num.toString().padStart(2, '0');

                return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}<span class="text-3xl md:text-4xl text-vintage-rouge-dark">.${pad(milliseconds)}</span>`;
            }

            // Kronometreyi güncelleyen fonksiyon
            function updateTimer() {
                const currentTime = Date.now();
                elapsedTime = currentTime - startTime;
                timeDisplay.innerHTML = formatTime(elapsedTime);
            }

            // Başlat
            function startTimer() {
                startTime = Date.now() - elapsedTime; // Duraklatıldıysa kaldığımız yerden devam et
                timerInterval = setInterval(updateTimer, 10); // Her 10ms'de bir güncelle (milisaniye için)
                running = true;
                mainBtn.textContent = 'Durdur';
                mainBtn.classList.add('bg-vintage-rouge-light'); // Durdur butonu için farklı renk
                secondaryBtn.textContent = 'Tur';
            }

            // Durdur
            function stopTimer() {
                clearInterval(timerInterval);
                running = false;
                mainBtn.textContent = 'Devam Et';
                mainBtn.classList.remove('bg-vintage-rouge-light');
                secondaryBtn.textContent = 'Sıfırla';
            }

            // Sıfırla
            function resetTimer() {
                clearInterval(timerInterval);
                running = false;
                elapsedTime = 0;
                startTime = 0;
                lapCount = 1;
                timeDisplay.innerHTML = formatTime(0);
                mainBtn.textContent = 'Başlat';
                secondaryBtn.textContent = 'Sıfırla';
                secondaryBtn.disabled = true; // Başlangıçta sıfırlama pasif
                lapsList.innerHTML = ''; // Tur listesini temizle
                lapsList.appendChild(lapsPlaceholder); // "Tur yok" yazısını geri ekle
                clearLapsBtn.disabled = true;
            }

            // Tur kaydet
            function recordLap() {
                if (lapsPlaceholder) {
                    lapsPlaceholder.remove(); // "Tur yok" yazısını kaldır
                }
                
                const lapTime = formatTime(elapsedTime);
                const lapElement = document.createElement('div');
                lapElement.className = 'flex justify-between items-center p-2 border-b border-gray-100 font-mono-spaced';
                lapElement.innerHTML = `
                    <span class="text-sm font-semibold text-gray-500">Tur ${lapCount}</span>
                    <span class="text-gray-800">${lapTime.replace(/<[^>]*>/g, '')}</span> <!-- HTML taglerini kaldırarak göster -->
                `;
                
                // Yeni turu listenin başına ekle
                lapsList.prepend(lapElement);
                lapCount++;
                clearLapsBtn.disabled = false; // Temizle butonu aktif
            }

            // Ana Buton (Başlat / Durdur / Devam Et)
            mainBtn.addEventListener('click', () => {
                if (!running) {
                    startTimer();
                } else {
                    stopTimer();
                }
                secondaryBtn.disabled = false; // Zamanlayıcı başladığı an diğer butonu aktif et
            });

            // İkincil Buton (Sıfırla / Tur)
            secondaryBtn.addEventListener('click', () => {
                if (running) {
                    recordLap();
                } else {
                    resetTimer();
                }
            });

            // Tur Listesini Temizle
            clearLapsBtn.addEventListener('click', () => {
                lapsList.innerHTML = '';
                lapsList.appendChild(lapsPlaceholder);
                lapCount = 1;
                clearLapsBtn.disabled = true;
            });

            // Başlangıç durumu
            resetTimer(); // Sayfayı sıfırlanmış halde başlat
        });
    </script>
</body>
</html>
